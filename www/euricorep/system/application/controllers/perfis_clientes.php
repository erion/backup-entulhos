<?php    class Perfis_clientes extends Controller {        function Perfis_clientes() {            parent::Controller();            $this->load->model('perfis_cliente');            $this->data['titulo'] = $this->perfis_cliente->titulo;            $this->data['usuario_logado'] = $this->session->userdata('nome');            $this->data['tipo_usuario'] = $this->session->userdata('tipo');            verificar_permissao($this->session->userdata('tipo'),array('SAD','ADM'));            seleciona_menu($this,'interesse_menu');        }        function listar() {            $pc = new Perfis_cliente();            $CI = &get_instance();            $por_pagina = $CI->config->item('pedidos_por_pagina');            $this->data['pc'] = $pc->get($por_pagina,$this->input->get('per_page'))->all;            $this->load->library('pagination');            $this->pagination->initialize(config_pagination('perfis_clientes/listar',$pc->count(),'per_page'));            $this->view->load('perfil_cliente/listar',$this->data);        }        function cadastrar() {            $post = $this->input->post('perfil_cliente');            $this->data['jsatual'] = array('perfil_cliente_cadastrar');            $c = new Cliente();            $this->data['clientes'] = $c->get_dropdown();            $a = new Artigo();            $this->data['artigos'] = $a->get_dropdown();            if (empty($post)) {                $this->data['pc'] = $pc = new Perfis_cliente();                $this->view->load('perfil_cliente/form',$this->data);            } else {                $this->data['pc'] = $pc = new Perfis_cliente($this->input->post('perfil_cliente'));                if ($pc->save()) {                    redirect('perfis_clientes/listar');                }                $this->view->load('perfil_cliente/form');            }        }        function detalhes($id,$pag = null) {            $post = $this->input->post('perfil_cliente');            $this->data['jsatual'] = array('perfil_cliente_cadastrar');            $c = new Cliente();            $this->data['clientes'] = $c->get_dropdown();            $a = new Artigo();            $this->data['artigos'] = $a->get_dropdown();            if (empty($post)) {                $pc = new Perfis_cliente();                $this->data['pc'] = $pc->get_by_id($id);                $this->view->load('perfil_cliente/form',$this->data);            } else {                $this->data['pc'] = $pc = new Perfis_cliente($this->input->post('perfil_cliente'));                $pc->id = $id;                if ($pc->save()) {                    $uri = 'perfis_clientes/listar/'.$pag;                    redirect($uri);                }                $this->view->load('perfil_cliente/form',$this->data);            }        }        function excluir($id,$pag = null) {            $pc = new Perfis_cliente();            $pc->get_by_id($id);            $pc->delete();            $uri = 'perfis_clientes/listar/'.$pag;            redirect($uri);        }            }?>